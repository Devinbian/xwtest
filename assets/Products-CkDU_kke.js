import{d as zt,c as I,r as f,a as Ee,o as nt,w as U,b as at,e as d,f as u,g as a,u as T,n as w,h as y,i as ue,v as ot,j as it,k as m,F as A,l as R,m as L,t as b,p as rt,q as Ut,s as Qt,x as Yt,y as Vt,z as jt,A as Wt,B as Jt,C as lt,D as Xt,L as Zt,E as es,G as ts,H as ss,I as ns,J as as,_ as os}from"./index-Ct3V4n5_.js";import{Q as is}from"./QuoteDialog-BD5qZbse.js";const dt=[{id:1,name:"数字万用表/源表",brands:["ADCMT","KEYSIGHT","KEITHLEY","HIOKI","FLUKE","IWATSU","RIGOL","GWINSTEK"]},{id:2,name:"电压/电流源",brands:["ADCMT","KEYSIGHT","KEITHLEY","KIKUSUI","CHROMA","RIGOL","GWINSTEK"]},{id:3,name:"超高电阻/微小电流计",brands:["ADCMT","KEYSIGHT","KEITHLEY","HIOKI"]},{id:4,name:"数字示波器",brands:["TEKTRONIX","KEYSIGHT","R&S","RIGOL"]},{id:5,name:"电气安规测试",brands:["KIKUSUI","HIOKI","GWINSTEK","TONGHUI"]},{id:6,name:"X-RAY荧光分析仪",brands:["SHIMADZU","HITACHI","FISCHER","OLYMPUS"]},{id:7,name:"镀层膜厚测试仪",brands:["FISCHER","BOWMAN","HITACHI"]},{id:8,name:"扫描电子显微镜SEM",brands:["THERMO FISHER","HITACHI","ZEISS"]},{id:9,name:"傅里叶红外显微镜",brands:["THERMO FISHER","SHIMADZU","JASCO"]},{id:10,name:"影像测试仪・三次元",brands:["NIKON","MITUTOYO","ACCRETECH","HEXAGON","GARH","OGP"]},{id:11,name:"水滴角・接触角测试仪",brands:["KRUSS","KINO","SHENTIN"]},{id:12,name:"拉伸・弯曲・疲劳试验机",brands:["SHIMADZU","INSTRON","GOTECH"]},{id:13,name:"照度・色彩・色差",brands:["KONICA MINOLTA","X-RITE","日本电色","CA"]},{id:14,name:"数据记录仪・数据采集仪",brands:["HIOKI","GRAPHTEC"]},{id:15,name:"振动・噪音测试",brands:["RION","MIROSTONE"]},{id:16,name:"环境试验箱",brands:["ESPEC","HITACHI","GWINSTEK","TOMILO"]},{id:17,name:"耗材・工具",brands:["通讯连接器"]}],rs={class:"products-page"},ls={class:"filter-content"},ds={class:"filters-sticky"},us={class:"toolbar-top"},cs={class:"product-type-selector"},ps=["aria-pressed"],vs=["aria-pressed"],fs={class:"brand-quick-pop"},ys=["aria-expanded"],ms={class:"brand-quick-input"},bs={key:0,class:"brand-quick-suggest"},hs=["onClick"],ks={class:"suggest-brand"},gs={class:"suggest-scope"},ws={key:1,class:"brand-quick-empty"},Cs={class:"facets"},Is={class:"facet-head"},Ss=["aria-pressed","title","onClick"],_s=["aria-expanded","onClick"],$s={class:"facet-title"},Hs={key:0,class:"facet-badge"},Es=["onClick"],qs={class:"facet-body"},Ts={class:"brand-chips"},Ns=["aria-pressed","onClick"],xs=["onClick"],Os={key:1,class:"mobile-filter"},As={class:"menu-header"},Rs={class:"menu-content"},Bs={class:"filter-group"},Ps={class:"filter-options"},Ls=["aria-pressed"],Ms=["aria-pressed"],Fs={class:"section-title"},Ks={class:"brand-list"},Ds=["aria-pressed","onClick"],Gs={class:"products-content"},zs={class:"topbar-main"},Us={class:"page-title"},Qs={class:"topbar-actions"},Ys={class:"search-box",role:"search","aria-label":"搜索产品"},Vs=["aria-pressed"],js=["aria-label"],Ws={key:0,class:"pill-count","aria-hidden":"true"},Js=["disabled"],Xs={key:1,class:"hot-admin-editing"},Zs=["disabled"],en=["disabled"],tn=["disabled"],sn={key:0,class:"topbar-chips","aria-label":"已选筛选项"},nn=["title","onClick"],an={class:"chip-label"},on={class:"chips-actions"},rn=["aria-expanded"],ln={key:1,class:"chips-compact-count","aria-hidden":"true"},dn={key:0,class:"empty-products"},un={class:"empty-card"},cn={key:0,class:"active-tags","aria-label":"当前筛选条件"},pn=["title","onClick"],vn={class:"empty-actions"},fn={key:1,class:"products-grid"},yn={class:"image-wrapper"},mn={key:0,class:"hot-tag","aria-label":"热门产品"},bn={key:0,class:"hot-rank"},hn=["checked","disabled","onChange"],kn=["value","disabled","onInput"],gn={class:"product-info"},wn=["title"],Cn={key:0,class:"specs-row"},In=["id"],Sn=["innerHTML"],_n=["aria-controls","aria-expanded","onClick"],$n={class:"product-brand"},Hn={class:"card-actions"},En=["href"],qn=["onClick"],ce="xw:hot-editor:enabled",ut=10,Tn=zt({__name:"Products",setup(Nn){const S=dt,pe=as,c=Ut(),M=Qt(),ct=t=>{if(typeof window>"u")return null;try{return window.localStorage.getItem(t)}catch{return null}},ve=(t,e)=>{if(!(typeof window>"u"))try{window.localStorage.setItem(t,e)}catch{}},qe=I(()=>{const t=c.query.__hot,e=Array.isArray(t)?t[0]:t;return e==="1"||e==="true"||e==="on"}),Te=I(()=>{const t=c.query.__token,e=Array.isArray(t)?t[0]:t;return typeof e=="string"?e.trim():""}),Q=f(!1),B=f(!1),N=f({overrides:{},disableAllHot:!1}),H=f(!1),Y=f(!1),Ne=f(null),pt=I(()=>ns(pe,N.value.overrides,N.value.disableAllHot)),xe=async()=>{const t=await Yt();N.value={overrides:t.overrides??{},disableAllHot:t.disableAllHot===!0}},oe=async()=>{Y.value=await Vt(),!Y.value&&B.value&&(B.value=!1,ve(ce,"0"))},fe=async t=>{const e=String(t??"").trim()||String(window.prompt("请输入热门编辑口令（服务器端 HOT_EDITOR_TOKEN）")??"").trim();return e?(await jt(e),await oe(),Y.value):!1},ye=()=>{var t;(t=Ne.value)==null||t.removeAttribute("open")},vt=async()=>{H.value||!await oe().then(()=>Y.value)&&!await fe()||(B.value=!0,ve(ce,"1"))},ft=async()=>{ye(),B.value=!1,ve(ce,"0")},J=async t=>{if(!H.value&&!(!Y.value&&!await fe())){N.value=t,H.value=!0;try{await ts(t),ss()}catch(e){await xe(),String((e==null?void 0:e.message)??e)==="unauthorized"?(await oe(),window.alert("热门编辑口令不正确或未配置，保存失败。")):window.alert("保存热门配置失败，请稍后重试。")}finally{H.value=!1}}},yt=()=>{ye(),J({overrides:{},disableAllHot:!1})},mt=()=>{ye(),window.confirm("确认清空所有热门标记？（将覆盖代码默认热门）")&&J({overrides:{},disableAllHot:!0})},bt=(t,e)=>{const n=String(t),s={...N.value.overrides},o=s[n]??{};if(e){const{hotRank:i}=o;s[n]={...o,isHot:!0},typeof i=="number"?s[n].hotRank=i:i===null&&delete s[n].hotRank}else s[n]={isHot:!1};J({...N.value,overrides:s})},ht=(t,e)=>{const n=String(t),s=String(e??"").trim(),o=s?Number.parseInt(s,10):NaN,i=Number.isFinite(o)?Math.trunc(o):void 0,p={...N.value.overrides};if(!s){const r=p[n]??{};p[n]={...r,isHot:!0,hotRank:null},J({...N.value,overrides:p});return}if(!(!i||i<1||i>10)){for(const r of pe)if(r.id!==t&&r.hotRank===i){const l=String(r.id);p[l]={...p[l]??{},hotRank:null}}for(const[r,l]of Object.entries(p))r!==n&&typeof(l==null?void 0:l.hotRank)=="number"&&l.hotRank===i&&(p[r]={...l??{},hotRank:null});p[n]={...p[n]??{},isHot:!0,hotRank:i},J({...N.value,overrides:p})}},Oe=t=>{var n;const e=t.trim().toLowerCase();if(!e)return null;for(const s of S){const o=(n=s.brands)==null?void 0:n.find(i=>String(i).trim().toLowerCase()===e);if(o)return{categoryId:s.id,brand:o}}return null},Ae=t=>{var s;const e=new Set,n=[];for(const o of t){const i=String(o.brand??"").trim();if(!i)continue;let p=o.categoryId,r=i;const l=Number.isFinite(p)?S.find(g=>g.id===p):void 0;if(l){const g=((s=l.brands)==null?void 0:s.find(_=>String(_).trim().toLowerCase()===r.toLowerCase()))??null;if(g)r=g;else{const _=Oe(r);if(_)p=_.categoryId,r=_.brand;else continue}}else{const g=Oe(r);if(g)p=g.categoryId,r=g.brand;else continue}if(!Number.isFinite(p))continue;const C=`${p}:${r}`;e.has(C)||(e.add(C),n.push({categoryId:p,brand:r}))}return n},kt=t=>typeof t!="string"||!t.trim()?[]:t.split(",").map(e=>e.trim()).filter(Boolean).map(e=>{const n=e.indexOf(":");if(n===-1)return{categoryId:Number.NaN,brand:e};const s=e.slice(0,n),o=e.slice(n+1);return{categoryId:Number(s),brand:o}}),gt=t=>t.filter(e=>Number.isFinite(e.categoryId)&&!!String(e.brand??"").trim()).map(e=>`${e.categoryId}:${String(e.brand).trim()}`).join(","),F=()=>{const t=Ae(kt(c.query.brands)),e=c.query.hot,n=Array.isArray(e)?e[0]:e;return{categories:(c.query.categories||"").split(",").filter(Boolean),brands:t,newProduct:c.query.id||"",type:c.query.type||"",q:c.query.q||"",hotOnly:n==="1"||n==="true"||n==="on"}},Re=()=>{const t=F();h.value=t.categories,v.value=t.brands,k.value=t.newProduct,Be.value=t.type,$.value=t.q,E.value=t.hotOnly;const e=typeof c.query.brands=="string"?c.query.brands:"",n=gt(t.brands);if((e||"")!==(n||"")){const s={...c.query};n?s.brands=n:delete s.brands,M.replace({query:s})}},h=f(F().categories),v=f(F().brands),k=f(F().newProduct),Be=f(F().type),$=f(F().q),E=f(F().hotOnly);let X=null;const K=f(""),wt=f(!1),P=Ee({}),Z=Ee({}),D=f(!1),Pe=f(null),Le=f(null),ie=f(null),Me=t=>{const e=ie.value;if(!e||t.deltaY===0)return;const n=e.scrollTop<=0,s=e.scrollTop+e.clientHeight>=e.scrollHeight-1;(t.deltaY<0&&n||t.deltaY>0&&s)&&t.preventDefault()},me=t=>String(t??"").toLowerCase().replace(/[^a-z0-9\u4e00-\u9fa5]+/g,""),be=new Map,Fe=new Map;for(const t of S)for(const e of t.brands??[]){const n=String(e??"").trim();if(!n)continue;const s=be.get(n)??[];s.includes(t.id)||s.push(t.id),be.set(n,s);const o=Fe.get(n)??[];o.includes(t.name)||o.push(t.name),Fe.set(n,o)}const Ke=I(()=>{var o;const t=me(K.value);if(!t)return[];const e=[],n=new Set;for(const[i,p]of be.entries())if(me(i).includes(t)){if(p.length>1){const l=`all:${i}`;n.has(l)||(n.add(l),e.push({key:l,brand:i,kind:"all",categoryIds:[...p],scopeLabel:"全部分类"}))}for(const l of p){const C=((o=S.find(_=>_.id===l))==null?void 0:o.name)??"",g=`one:${l}:${i}`;n.has(g)||(n.add(g),e.push({key:g,brand:i,kind:"one",categoryIds:[l],categoryId:l,scopeLabel:C||"分类"}))}}const s=i=>me(i.brand).startsWith(t);return e.sort((i,p)=>{const r=s(i),l=s(p);return r!==l?r?-1:1:i.kind!==p.kind?i.kind==="all"?-1:1:i.brand.localeCompare(p.brand)}),e.slice(0,8)}),V=t=>h.value.includes(String(t)),De=t=>!!P[t],Ct=t=>{P[t]=!P[t]},he=t=>v.value.filter(e=>e.categoryId===t&&!!String(e.brand??"").trim()).length,It=t=>{k.value="";const e=String(t);h.value=h.value.filter(n=>String(n)!==e),v.value=v.value.filter(n=>n.categoryId!==t),O()},St=I(()=>{if(!wt.value)return S;const t=new Set;for(const e of h.value){const n=Number(e);Number.isFinite(n)&&t.add(n)}for(const e of v.value)Number.isFinite(e.categoryId)&&t.add(e.categoryId);return t.size===0?S:S.filter(e=>t.has(e.id))}),_t=I(()=>S.find(t=>t.id===Number(c.query.category))),j=I(()=>{let t=[...pt.value];if(c.query.type){const n=c.query.type;t=t.filter(s=>s.type===n)}if(h.value.length>0&&(t=t.filter(n=>h.value.includes(String(n.categoryId)))),v.value.length>0&&(t=t.filter(n=>v.value.some(s=>s.categoryId===n.categoryId&&s.brand===n.brand))),c.query.brand){const n=c.query.brand;t=t.filter(s=>s.brandDisplay===n||s.brand===n)}if(k.value){const n=Number(k.value);t=t.filter(s=>s.id===n)}const e=$.value.trim().toLowerCase();return e&&(t=t.filter(n=>{var i;const s=((i=S.find(p=>p.id===n.categoryId))==null?void 0:i.name)??"";return[n.name,n.brandDisplay,n.brand,n.description,s,...n.specs??[]].filter(Boolean).join(" ").toLowerCase().includes(e)})),E.value&&(t=t.filter(n=>!!n.isHot||typeof n.hotRank=="number")),t}),ke=()=>{const t=$.value.trim(),e={...c.query};t?e.q=t:delete e.q,e.id&&delete e.id,k.value="",M.replace({query:e})},$t=()=>{X&&window.clearTimeout(X),X=window.setTimeout(()=>{ke()},240)},Ge=()=>{$.value="",ke()},Ht=()=>{E.value=!E.value,c.query.id&&(k.value=""),O()},G=f(!1),z=f(!1),Et=()=>{var e;const t=((e=window.visualViewport)==null?void 0:e.height)??window.innerHeight;document.documentElement.style.setProperty("--overlay-vh",`${t*.01}px`),document.documentElement.style.setProperty("--overlay-vh-px",`${t}px`)},ze=()=>{document.documentElement.style.removeProperty("--overlay-vh"),document.documentElement.style.removeProperty("--overlay-vh-px")},ge=()=>{G.value=window.innerWidth<=768};nt(()=>{var t;ge(),window.addEventListener("resize",ge),Re(),qt(),document.addEventListener("pointerdown",Ye),(t=ie.value)==null||t.addEventListener("wheel",Me,{passive:!1}),oe(),xe(),Q.value=qe.value,B.value=Q.value&&ct(ce)==="1",Q.value&&Te.value&&fe(Te.value).finally(()=>{const e={...c.query};delete e.__token,M.replace({query:e})}),Se=window.scrollY||0,Je(),window.addEventListener("scroll",Xe,{passive:!0})}),U(z,t=>{G.value&&(t?Et():ze())}),at(()=>{ze()}),U(qe,t=>{Q.value=t,t||(B.value=!1)});const Ue=t=>{k.value="";const e=String(t),n=h.value.indexOf(e);n===-1?h.value.push(e):h.value.splice(n,1),O()},we=(t,e)=>{if(k.value="",!Number.isFinite(t)){v.value=v.value.filter(s=>s.brand!==e),O();return}const n=v.value.findIndex(s=>s.categoryId===t&&s.brand===e);n===-1?v.value.push({categoryId:t,brand:e}):v.value.splice(n,1),O()},W=(t,e)=>Number.isFinite(t)?v.value.some(n=>n.categoryId===t&&n.brand===e):v.value.some(n=>n.brand===e&&!Number.isFinite(n.categoryId));let Qe=!1;const qt=()=>{if(Qe)return;Qe=!0;const t=new Set;for(const e of h.value){const n=Number(e);Number.isFinite(n)&&t.add(n)}for(const e of v.value)Number.isFinite(e.categoryId)&&t.add(e.categoryId);for(const e of t)P[e]=!0},Tt=()=>{for(const t of h.value){const e=Number(t);Number.isFinite(e)&&(P[e]=!0)}for(const t of v.value)Number.isFinite(t.categoryId)&&(P[t.categoryId]=!0)},Nt=t=>{const e=[...t.brands??[]].map(n=>String(n)).filter(Boolean);return e.sort((n,s)=>{const o=W(t.id,n),i=W(t.id,s);return o!==i?o?-1:1:n.localeCompare(s)}),Z[t.id]?e:e.slice(0,ut)},xt=t=>{Z[t]=!Z[t]},Ot=(t,e)=>{k.value="";const n=String(t??"").trim(),s=e.filter(l=>Number.isFinite(l));if(!n||s.length===0)return;const o=new Set(v.value.map(l=>`${l.categoryId}:${l.brand}`)),p=s.map(l=>`${l}:${n}`).every(l=>o.has(l));let r=v.value.filter(l=>!(l.brand===n&&s.includes(l.categoryId)));if(!p)for(const l of s)o.has(`${l}:${n}`)||(r.push({categoryId:l,brand:n}),P[l]=!0);v.value=Ae(r),O()},At=t=>{if(t.kind==="all")Ot(t.brand,t.categoryIds);else{const e=t.categoryId??t.categoryIds[0];P[e]=!0,we(e,t.brand)}K.value="",D.value=!1};U([h,v],()=>{G.value||Tt()},{deep:!0});const Rt=async()=>{var t,e;D.value=!0,await Jt(),(e=(t=Le.value)==null?void 0:t.focus)==null||e.call(t)},Ce=()=>{D.value=!1,K.value=""},Bt=()=>{D.value?Ce():Rt()},Ye=t=>{if(!D.value)return;const e=Pe.value,n=t.target;n&&(e!=null&&e.contains(n)||Ce())};U(()=>c.query,()=>{c.query.id||(k.value=""),Re()},{immediate:!0});const ee=t=>{const e={...c.query};c.query.type===t?delete e.type:(e.type=t,delete e.id),M.push({query:e}),k.value=""},te=I(()=>{let t=0;return c.query.type&&(t+=1),c.query.brand&&(t+=1),E.value&&(t+=1),$.value.trim()&&(t+=1),t+=h.value.length,t+=v.value.length,k.value&&(t+=1),t}),Ie=()=>{Be.value="",v.value=[],h.value=[],k.value="",$.value="",E.value=!1,M.push({name:"products",query:Q.value?{__hot:"1"}:{}})},Pt=()=>{z.value=!1,Ie()},Lt=t=>{const e={...c.query};delete e[t],M.replace({query:e})},q=I(()=>{const t=[],e=new Set(v.value.filter(r=>Number.isFinite(r.categoryId)&&!!r.brand).map(r=>String(r.categoryId))),n=c.query.type;(n==="new"||n==="used")&&t.push({key:`type:${n}`,label:`类型：${tt(n)}`,remove:()=>ee(n)});const s=c.query.brand;s&&t.push({key:`brandJump:${s}`,label:`全分类品牌：${s}`,remove:()=>Lt("brand")});const o=$.value.trim();o&&t.push({key:`q:${o}`,label:`搜索：${o}`,remove:()=>Ge()}),E.value&&t.push({key:"hot:1",label:"热门",remove:()=>{E.value=!1,O()}});for(const r of h.value){if(e.has(String(r)))continue;const l=S.find(C=>String(C.id)===String(r));t.push({key:`cat:${r}`,label:l?`分类：${l.name}`:`分类：${r}`,remove:()=>Ue(Number(r))})}const i=new Map;for(const r of v.value){if(!Number.isFinite(r.categoryId)||!r.brand)continue;const l=i.get(r.categoryId)??[];l.push(r.brand),i.set(r.categoryId,l)}for(const[r,l]of i.entries()){const C=S.find(He=>He.id===r),g=(C==null?void 0:C.name)??`分类${r}`,_=Array.from(new Set(l)),Gt=_.length<=1?`品牌：${g} / ${_[0]}`:`品牌：${g} / ${_[0]} +${_.length-1}`;t.push({key:`brandGroup:${r}`,label:Gt,title:`品牌：${g} / ${_.join("、")}`,remove:()=>{v.value=v.value.filter(He=>He.categoryId!==r),O()}})}if(k.value){const r=k.value,l=pe.find(C=>String(C.id)===String(r));t.push({key:`id:${r}`,label:l?`产品：${l.name}`:`ID：${r}`,remove:()=>{k.value="",O()}})}const p=new Map;for(const r of t)p.set(r.key,r);return Array.from(p.values())}),x=f(!1),Ve=I(()=>G.value?2:6),je=I(()=>x.value?q.value:q.value.slice(0,Ve.value)),We=I(()=>{const t=q.value.length-je.value.length;return t>0?t:0});U(q,t=>{t.length<=Ve.value&&(x.value=!1)});const se=f(!1),re=I(()=>q.value.length===0?!0:se.value);let Se=0,ne=0;const _e=t=>{se.value!==t&&(se.value=t,t&&(x.value=!1))},Je=()=>{ne=0;const t=window.scrollY||0,e=t-Se;if(Se=t,t<=40){_e(!1);return}if(e>8&&t>140){_e(!0);return}e<-10&&_e(!1)},Xe=()=>{ne||(ne=window.requestAnimationFrame(Je))};U(()=>q.value.length,(t,e)=>{if(t===0){se.value=!1,x.value=!1;return}e===0&&(se.value=!1)});const Ze=t=>({new:"全新",used:"二手",refurbished:"翻新",sale:"促销",discount:"50%"})[t]||"未知",et=async()=>{const t=j.value.map(e=>e.image);await Promise.all(t.map(e=>Wt(e)))};U(j,()=>{et()}),nt(()=>{et()});const O=()=>{const t={};h.value.length>0&&(t.categories=h.value.join(",")),v.value.length>0&&(t.brands=v.value.filter(n=>Number.isFinite(n.categoryId)&&!!n.brand).map(n=>`${n.categoryId}:${n.brand}`).join(",")),k.value&&(t.id=k.value),c.query.type&&(t.type=c.query.type),c.query.brand&&(t.brand=c.query.brand),c.query.__hot&&(t.__hot=String(c.query.__hot)),E.value&&(t.hot="1");const e=$.value.trim();e&&(t.q=e),M.replace({query:t})};at(()=>{var t;X&&window.clearTimeout(X),window.removeEventListener("resize",ge),document.removeEventListener("pointerdown",Ye),(t=ie.value)==null||t.removeEventListener("wheel",Me),window.removeEventListener("scroll",Xe),ne&&window.cancelAnimationFrame(ne)});const Mt=t=>t.includes("<sup>")?t:t.replace(/(\d+)×10(\d+)/g,"$1×10<sup>$2</sup>"),$e=f(!1),ae=f(null),le=Ee(new Set),de=t=>le.has(t),Ft=t=>{if(le.has(t)){le.delete(t);return}le.add(t)};function tt(t){return t==="new"?"产品":t==="used"?"中古品":"全部"}const Kt=I(()=>{const t=[];if(t.push("【产品信息】"),ae.value){const o=ae.value;t.push(`名称：${o.name}`),t.push(`品牌：${o.brandDisplay||o.brand}`),t.push(`成色：${Ze(o.condition)}`),o.link&&t.push(`详情链接：${o.link}`)}else t.push("未指定（请补充型号/参数/用途）");t.push(""),t.push("【当前筛选】"),t.push(`类型：${tt(c.query.type)}`);const e=h.value.map(o=>{var i;return(i=S.find(p=>p.id===Number(o)))==null?void 0:i.name}).filter(Boolean);t.push(`分类：${e.length?e.join("、"):"全部"}`);const n=new Map;for(const o of v.value){const i=n.get(o.categoryId)??[];i.push(o.brand),n.set(o.categoryId,i)}const s=Array.from(n.entries()).map(([o,i])=>{var l;const p=((l=S.find(C=>C.id===o))==null?void 0:l.name)??`分类${o}`,r=Array.from(new Set(i));return`${p}：${r.join("、")}`});t.push(`品牌：${s.length?s.join("；"):"全部"}`),c.query.brand&&t.push(`品牌跳转：${c.query.brand}`),j.value.length&&t.push(`当前列表数量：${j.value.length}`),t.push(""),t.push("【咨询内容】价格 / 交期 / 质保 / 是否现货 / 服务承诺");try{t.push(""),t.push(`页面：${window.location.href}`)}catch{}return t.join(`
`)}),st=t=>{ae.value=t??null,$e.value=!0},Dt=()=>{$e.value=!1,ae.value=null};return(t,e)=>{var n;return d(),u("div",null,[a("div",rs,[G.value?m("",!0):(d(),u("aside",{key:0,ref_key:"desktopCategoriesMenuEl",ref:ie,class:"categories-menu"},[a("div",ls,[a("div",ds,[a("div",{ref_key:"desktopBrandPickerRoot",ref:Pe,class:"filters-toolbar"},[a("div",us,[a("div",cs,[a("button",{type:"button",class:w(["type-btn",{active:T(c).query.type==="new"}]),"aria-pressed":T(c).query.type==="new",onClick:e[0]||(e[0]=s=>ee("new"))}," 产品 ",10,ps),a("button",{type:"button",class:w(["type-btn",{active:T(c).query.type==="used"}]),"aria-pressed":T(c).query.type==="used",onClick:e[1]||(e[1]=s=>ee("used"))}," 中古品 ",10,vs)]),a("div",fs,[a("button",{type:"button",class:"facet-icon brand-quick-trigger",title:"添加品牌","aria-expanded":D.value,onClick:Bt},e[19]||(e[19]=[a("i",{class:"fas fa-search","aria-hidden":"true"},null,-1),a("span",{class:"sr-only"},"添加品牌",-1)]),8,ys)])]),D.value?(d(),u("div",{key:0,class:"brand-quick-panel",role:"dialog","aria-label":"添加品牌",onClick:e[4]||(e[4]=y(()=>{},["stop"]))},[a("div",ms,[e[21]||(e[21]=a("i",{class:"fas fa-search","aria-hidden":"true"},null,-1)),ue(a("input",{ref_key:"desktopBrandPickerInput",ref:Le,"onUpdate:modelValue":e[2]||(e[2]=s=>K.value=s),type:"search",inputmode:"search",placeholder:"输入品牌（支持英文/缩写）",onKeydown:it(Ce,["escape"])},null,544),[[ot,K.value]]),K.value.trim()?(d(),u("button",{key:0,type:"button",class:"brand-quick-clear","aria-label":"清除品牌搜索",onClick:e[3]||(e[3]=s=>K.value="")},e[20]||(e[20]=[a("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)]))):m("",!0)]),Ke.value.length?(d(),u("div",bs,[(d(!0),u(A,null,R(Ke.value,s=>(d(),u("button",{key:s.key,type:"button",class:"suggest-item",onClick:o=>At(s)},[a("span",ks,b(s.brand),1),a("span",gs,b(s.scopeLabel),1)],8,hs))),128))])):(d(),u("div",ws," 输入关键字以搜索品牌 "))])):m("",!0)],512)]),a("div",Cs,[(d(!0),u(A,null,R(St.value,s=>(d(),u("div",{key:s.id,class:w(["facet",{selected:V(s.id)}])},[a("div",Is,[a("button",{type:"button",class:w(["facet-select",{active:V(s.id)}]),"aria-pressed":V(s.id),title:V(s.id)?"取消筛选该分类":"筛选该分类",onClick:y(o=>Ue(s.id),["stop"])},[a("i",{class:w(["fas",V(s.id)?"fa-check":"fa-plus"]),"aria-hidden":"true"},null,2),e[22]||(e[22]=a("span",{class:"sr-only"},"筛选该分类",-1))],10,Ss),a("button",{type:"button",class:"facet-toggle","aria-expanded":De(s.id),onClick:o=>Ct(s.id)},[a("span",$s,b(s.name),1),he(s.id)>0?(d(),u("span",Hs," 已选"+b(he(s.id)),1)):m("",!0)],8,_s),he(s.id)>0||V(s.id)?(d(),u("button",{key:0,type:"button",class:"facet-clear",title:"清空该分类筛选","aria-label":"清空该分类筛选",onClick:y(o=>It(s.id),["stop"])},e[23]||(e[23]=[a("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)]),8,Es)):m("",!0)]),ue(a("div",qs,[a("div",Ts,[(d(!0),u(A,null,R(Nt(s),o=>(d(),u("button",{key:o,type:"button",class:w(["brand-chip",{active:W(s.id,o)}]),"aria-pressed":W(s.id,o),onClick:i=>we(s.id,o)},b(o),11,Ns))),128))]),s.brands.length>ut?(d(),u("button",{key:0,type:"button",class:"facet-more",onClick:o=>xt(s.id)},[L(b(Z[s.id]?"收起品牌":`更多品牌（共${s.brands.length}个）`)+" ",1),a("i",{class:w(["fas",Z[s.id]?"fa-chevron-up":"fa-chevron-down"]),"aria-hidden":"true"},null,2)],8,xs)):m("",!0)],512),[[lt,De(s.id)]])],2))),128))])])],512)),G.value?(d(),u("div",Os,[a("div",{class:w(["menu-overlay",{active:z.value}]),onClick:e[5]||(e[5]=s=>z.value=!1)},null,2),a("div",{class:w(["filter-menu",{active:z.value}])},[a("div",As,[e[26]||(e[26]=a("h3",null,"筛选条件",-1)),te.value>0?(d(),u("button",{key:0,class:"clear-filters-btn",onClick:Ie},e[24]||(e[24]=[a("i",{class:"fas fa-times"},null,-1),L(" 清除筛选 ")]))):m("",!0),a("button",{class:"close-btn",onClick:e[6]||(e[6]=s=>z.value=!1)},e[25]||(e[25]=[a("i",{class:"fas fa-times"},null,-1)]))]),a("div",Rs,[a("div",Bs,[e[27]||(e[27]=a("h3",null,"产品类型",-1)),a("div",Ps,[a("button",{type:"button",class:w(["option-btn",{active:T(c).query.type==="new"}]),"aria-pressed":T(c).query.type==="new",onClick:e[7]||(e[7]=s=>ee("new"))}," 产品 ",10,Ls),a("button",{type:"button",class:w(["option-btn",{active:T(c).query.type==="used"}]),"aria-pressed":T(c).query.type==="used",onClick:e[8]||(e[8]=s=>ee("used"))}," 中古品 ",10,Ms)])]),(d(!0),u(A,null,R(T(dt),s=>(d(),u("div",{key:s.id,class:"filter-group"},[a("div",Fs,b(s.name),1),a("div",Ks,[(d(!0),u(A,null,R(s.brands,o=>(d(),u("button",{key:o,type:"button",class:w(["brand-item",{active:W(s.id,o)}]),"aria-pressed":W(s.id,o),onClick:i=>we(s.id,o)},[a("span",null,b(o),1)],10,Ds))),128))])]))),128))])],2)])):m("",!0),a("main",Gs,[a("div",{class:w(["products-topbar",{compact:re.value}]),"aria-label":"筛选栏"},[a("div",zs,[a("h2",Us,b(((n=_t.value)==null?void 0:n.name)||"全部产品"),1),a("div",Qs,[a("div",Ys,[e[31]||(e[31]=a("i",{class:"fas fa-search search-icon","aria-hidden":"true"},null,-1)),ue(a("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>$.value=s),class:"search-input",type:"search",inputmode:"search",placeholder:"搜索产品 / 型号 / 品牌",onInput:$t,onKeydown:e[10]||(e[10]=it(y(s=>ke(),["prevent"]),["enter"]))},null,544),[[ot,$.value]]),a("button",{type:"button",class:"hot-pill","aria-pressed":E.value,title:"热门",onClick:y(Ht,["stop"])},e[28]||(e[28]=[a("i",{class:"fas fa-fire","aria-hidden":"true"},null,-1),a("span",{class:"pill-text"},"热门",-1)]),8,Vs),G.value?(d(),u("button",{key:0,type:"button",class:"filter-pill","aria-label":te.value>0?`打开筛选（已选${te.value}项）`:"打开筛选",onClick:e[11]||(e[11]=y(s=>z.value=!0,["stop"]))},[e[29]||(e[29]=a("i",{class:"fas fa-sliders-h","aria-hidden":"true"},null,-1)),te.value>0?(d(),u("span",Ws,b(te.value),1)):m("",!0)],8,js)):m("",!0),$.value.trim()?(d(),u("button",{key:1,type:"button",class:"clear-search","aria-label":"清除搜索",onClick:Ge},e[30]||(e[30]=[a("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)]))):m("",!0)]),Q.value?(d(),u("div",{key:0,class:"hot-editor-gate",onClick:e[13]||(e[13]=y(()=>{},["stop"]))},[B.value?(d(),u("div",Xs,[a("details",{ref_key:"hotAdminMenu",ref:Ne,class:"hot-admin-menu"},[e[33]||(e[33]=a("summary",{class:"hot-admin-actions"},[L(" 操作 "),a("i",{class:"fas fa-chevron-down","aria-hidden":"true"})],-1)),a("div",{class:"hot-admin-popover",onClick:e[12]||(e[12]=y(()=>{},["stop"]))},[a("button",{type:"button",class:"hot-admin-item",disabled:H.value,onClick:y(yt,["stop"])}," 恢复默认 ",8,Zs),a("button",{type:"button",class:"hot-admin-item danger",disabled:H.value,onClick:y(mt,["stop"])}," 清空热门 ",8,en)])],512),a("button",{type:"button",class:"hot-admin-done",disabled:H.value,onClick:y(ft,["stop"])},e[34]||(e[34]=[a("i",{class:"fas fa-check","aria-hidden":"true"},null,-1),L(" 完成 ")]),8,tn)])):(d(),u("button",{key:0,type:"button",class:"hot-admin-enter",disabled:H.value,onClick:y(vt,["stop"])},e[32]||(e[32]=[a("i",{class:"fas fa-lock","aria-hidden":"true"},null,-1),L(" 编辑热门 ")]),8,Js))])):m("",!0)])]),q.value.length>0?(d(),u("div",sn,[re.value?m("",!0):(d(),u("div",{key:0,class:w(["chips",{collapsed:!x.value}])},[(d(!0),u(A,null,R(je.value,s=>(d(),u("button",{key:s.key,type:"button",class:"chip",title:s.title||s.label,onClick:y(o=>s.remove(),["stop"])},[a("span",an,b(s.label),1),e[35]||(e[35]=a("i",{class:"fas fa-times","aria-hidden":"true"},null,-1))],8,nn))),128))],2)),a("div",on,[!re.value&&We.value>0?(d(),u("button",{key:0,type:"button",class:"chips-more","aria-expanded":x.value,onClick:e[14]||(e[14]=y(s=>x.value=!x.value,["stop"]))},b(x.value?"收起":`+${We.value}`),9,rn)):m("",!0),re.value?(d(),u("div",ln," 已选"+b(q.value.length)+"项 ",1)):m("",!0),a("button",{type:"button",class:"chips-clear-icon","aria-label":"清空筛选",title:"清空筛选",onClick:y(Ie,["stop"])},e[36]||(e[36]=[a("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)]))])])):m("",!0)],2),j.value.length===0?(d(),u("div",dn,[a("div",un,[e[40]||(e[40]=a("div",{class:"empty-icon","aria-hidden":"true"},[a("i",{class:"fas fa-search"})],-1)),e[41]||(e[41]=a("h3",null,"未找到产品",-1)),e[42]||(e[42]=a("p",{class:"empty-desc"},"当前筛选条件下暂无匹配结果，可尝试清除筛选或直接咨询客服获取推荐。",-1)),q.value.length>0?(d(),u("div",cn,[(d(!0),u(A,null,R(q.value,s=>(d(),u("button",{key:s.key,type:"button",class:"tag-chip",title:s.title||s.label,onClick:y(o=>s.remove(),["stop"])},[L(b(s.label)+" ",1),e[37]||(e[37]=a("i",{class:"fas fa-times","aria-hidden":"true"},null,-1))],8,pn))),128))])):m("",!0),a("div",vn,[a("button",{type:"button",class:"empty-btn secondary",onClick:Pt},e[38]||(e[38]=[a("i",{class:"fas fa-times"},null,-1),L(" 清除筛选 ")])),a("button",{type:"button",class:"empty-btn primary",onClick:e[15]||(e[15]=s=>st())},e[39]||(e[39]=[a("i",{class:"fas fa-comments"},null,-1),L(" 立即咨询 ")]))])])])):(d(),u("div",fn,[(d(!0),u(A,null,R(j.value,s=>{var o;return d(),u("div",{key:s.id,class:"product-card"},[a("div",{class:w(["condition-tag",s.condition])},b(Ze(s.condition)),3),a("div",yn,[s.isHot||typeof s.hotRank=="number"?(d(),u("div",mn,[e[43]||(e[43]=a("i",{class:"fas fa-fire","aria-hidden":"true"},null,-1)),e[44]||(e[44]=a("span",null,"热门",-1)),typeof s.hotRank=="number"?(d(),u("span",bn,"#"+b(s.hotRank),1)):m("",!0)])):m("",!0),B.value&&Y.value?(d(),u("div",{key:1,class:"hot-editor-card",onClick:e[17]||(e[17]=y(()=>{},["stop"]))},[a("label",{class:"hot-editor-switch",onClick:e[16]||(e[16]=y(()=>{},["stop"]))},[a("input",{type:"checkbox",checked:!!s.isHot,disabled:H.value,onChange:i=>bt(s.id,i.target.checked)},null,40,hn),e[45]||(e[45]=a("span",{class:"switch-ui","aria-hidden":"true"},null,-1)),e[46]||(e[46]=a("span",{class:"switch-label"},"热门",-1))]),a("input",{class:"hot-rank-input",type:"number",min:"1",max:"10",step:"1",inputmode:"numeric",value:typeof s.hotRank=="number"?s.hotRank:"",disabled:H.value||!s.isHot,placeholder:"#",onInput:y(i=>ht(s.id,i.target.value),["stop"])},null,40,kn)])):m("",!0),rt(Zt,{src:s.image,alt:s.name,placeholder:T(Xt)(s.image)},null,8,["src","alt","placeholder"])]),a("div",gn,[a("h3",{title:s.name},b(s.name),9,wn),a("p",null,b(s.description),1),(o=s.specs)!=null&&o.length?(d(),u("div",Cn,[a("div",{class:w(["specs-list",{expanded:de(s.id)}]),id:`specs-${s.id}`},[(d(!0),u(A,null,R(s.specs,(i,p)=>ue((d(),u("span",{key:p,class:"spec-tag",innerHTML:Mt(i)},null,8,Sn)),[[lt,de(s.id)||p<3]])),128))],10,In),s.specs.length>3?(d(),u("button",{key:0,type:"button",class:"specs-more-btn","aria-controls":`specs-${s.id}`,"aria-expanded":de(s.id),onClick:y(i=>Ft(s.id),["stop"])},b(de(s.id)?"收起":`更多+${s.specs.length-3}`),9,_n)):m("",!0)])):m("",!0),e[49]||(e[49]=es('<div class="consult-hints" aria-label="咨询获取信息" data-v-05505922><span class="hint-label" data-v-05505922>咨询获取：</span><span class="hint-item" data-v-05505922>价格</span><span class="hint-item" data-v-05505922>交期</span><span class="hint-item" data-v-05505922>质保</span><span class="hint-item" data-v-05505922>是否现货</span><span class="hint-item" data-v-05505922>服务承诺</span></div>',1)),a("div",$n,b(s.brandDisplay),1),a("div",Hn,[a("a",{href:s.link,target:"_blank",class:"view-details-btn",onClick:e[18]||(e[18]=y(()=>{},["stop"]))},e[47]||(e[47]=[a("span",null,"查看详情",-1),a("i",{class:"fas fa-external-link-alt"},null,-1)]),8,En),a("button",{class:"quote-btn",onClick:y(i=>st(s),["stop"])},e[48]||(e[48]=[a("span",null,"立即咨询",-1),a("i",{class:"fas fa-comments"},null,-1)]),8,qn)])])])}),128))]))])]),rt(is,{show:$e.value,product:ae.value,contextText:Kt.value,onClose:Dt},null,8,["show","product","contextText"])])}}}),An=os(Tn,[["__scopeId","data-v-05505922"]]);export{An as default};
