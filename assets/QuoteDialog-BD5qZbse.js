import{d as C,r as y,b as B,o as E,w as q,e as i,O as M,p as N,T as D,M as L,f as r,g as e,t as c,k as u,n as h,u as O,N as Q,h as S,P as V,B as z,_ as A}from"./index-Ct3V4n5_.js";const I={class:"dialog-content"},U={key:0,class:"product-info"},F={key:1,class:"consult-context","aria-label":"咨询上下文"},K={class:"context-header"},P=["aria-label"],$={class:"sr-only",role:"status","aria-live":"polite"},j=["value"],G={class:"contact-container"},H={class:"qr-code-container"},J={class:"qr-code"},R=["src"],W=C({__name:"QuoteDialog",props:{show:{type:Boolean},product:{},contextText:{}},emits:["close"],setup(b,{emit:x}){const l=b,w=x,o=y(!1);let a=null;const p=y(null),f=`quote-dialog-title-${Math.random().toString(16).slice(2)}`;let n=null;const m=s=>{typeof document>"u"||(s?(n===null&&(n=document.body.style.overflow),document.body.style.overflow="hidden"):(n!==null&&(document.body.style.overflow=n),n=null))},g=s=>{try{const t=document.createElement("textarea");t.value=s,t.setAttribute("readonly",""),t.style.position="fixed",t.style.left="-9999px",t.style.top="0",document.body.appendChild(t),t.select();const _=document.execCommand("copy");return document.body.removeChild(t),_}catch{return!1}},k=async()=>{var s;if(l.contextText)try{if((s=navigator.clipboard)!=null&&s.writeText)await navigator.clipboard.writeText(l.contextText);else if(!g(l.contextText))return;o.value=!0,a&&window.clearTimeout(a),a=window.setTimeout(()=>{o.value=!1,a=null},1600)}catch{}};B(()=>{a&&window.clearTimeout(a),a=null,m(!1),document.removeEventListener("keydown",v)});const d=()=>{w("close")},v=s=>{l.show&&s.key==="Escape"&&d()};E(()=>{document.addEventListener("keydown",v)}),q(()=>l.show,s=>{m(s),s&&z(()=>{var t;(t=p.value)==null||t.focus()})},{immediate:!0});const T=s=>{s.target===s.currentTarget&&d()};return(s,t)=>(i(),M(V,{to:"body"},[N(D,{name:"fade"},{default:L(()=>[s.show?(i(),r("div",{key:0,class:"quote-dialog-overlay",onClick:T},[e("div",{ref_key:"dialogEl",ref:p,class:"quote-dialog",role:"dialog","aria-modal":"true","aria-labelledby":f,tabindex:"-1",onClick:t[0]||(t[0]=S(()=>{},["stop"]))},[t[6]||(t[6]=e("div",{class:"drag-handle","aria-hidden":"true"},null,-1)),e("div",{class:"dialog-header"},[e("h3",{id:f},"立即咨询"),e("button",{class:"close-btn",type:"button",onClick:d,"aria-label":"关闭弹窗"},t[1]||(t[1]=[e("i",{class:"fas fa-times"},null,-1)]))]),e("div",I,[s.product?(i(),r("div",U,[e("h4",null,c(s.product.name),1),e("p",null,c(s.product.description),1)])):u("",!0),t[5]||(t[5]=e("div",{class:"consult-scope","aria-label":"咨询可获取的信息"},[e("div",{class:"scope-title"},"咨询可获取："),e("div",{class:"scope-items"},[e("span",{class:"scope-item"},"价格"),e("span",{class:"scope-item"},"交期"),e("span",{class:"scope-item"},"质保"),e("span",{class:"scope-item"},"是否现货"),e("span",{class:"scope-item"},"服务承诺")])],-1)),s.contextText?(i(),r("div",F,[e("div",K,[t[2]||(t[2]=e("div",{class:"context-title"},"咨询上下文（可复制给销售）",-1)),e("button",{type:"button",class:h(["copy-btn",{copied:o.value}]),onClick:k,"aria-label":o.value?"已复制":"复制上下文"},[e("i",{class:h(["fas",o.value?"fa-check":"fa-copy"]),"aria-hidden":"true"},null,2),e("span",null,c(o.value?"已复制":"复制"),1)],10,P)]),e("span",$,c(o.value?"已复制到剪贴板":""),1),e("textarea",{class:"context-box",readonly:"",value:s.contextText,"aria-label":"咨询上下文内容"},null,8,j)])):u("",!0),e("div",G,[t[4]||(t[4]=e("div",{class:"contact-methods"},[e("div",{class:"contact-item"},[e("i",{class:"fas fa-phone-alt"}),e("div",{class:"contact-details"},[e("h5",null,"电话咨询"),e("a",{href:"tel:186-6258-5852"},"186-6258-5852")])]),e("div",{class:"contact-item"},[e("i",{class:"fas fa-envelope"}),e("div",{class:"contact-details"},[e("h5",null,"邮件咨询"),e("a",{href:"mailto:sales@xwtest.com.cn"},"sales@xwtest.com.cn")])]),e("div",{class:"contact-actions","aria-label":"快捷操作"},[e("a",{class:"action-btn primary",href:"tel:186-6258-5852"},[e("i",{class:"fas fa-phone-alt","aria-hidden":"true"}),e("span",null,"一键拨号")]),e("a",{class:"action-btn",href:"mailto:sales@xwtest.com.cn"},[e("i",{class:"fas fa-envelope","aria-hidden":"true"}),e("span",null,"发送邮件")])])],-1)),e("div",H,[e("div",J,[e("img",{src:O(Q)("/images/qrcode.png"),alt:"微信二维码",loading:"lazy",decoding:"async"},null,8,R),t[3]||(t[3]=e("p",null,"扫码添加客服微信",-1))])])])])],512)])):u("",!0)]),_:1})]))}}),Y=A(W,[["__scopeId","data-v-58228395"]]);export{Y as Q};
